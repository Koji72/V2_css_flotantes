/* ================================================== */
/*   SagaWeaver - Estilos de Paneles Consolidados     */
/* ================================================== */

/* --- Variables CSS Globales --- */
:root {
    /* Colores Base */
    --neon-cyan: #00FFFF;
    --neon-green: #00FF41;
    --neon-magenta: #FF00FF;
    --neon-yellow: #FFFF00;
    
    /* Fondos */
    --nexus-bg-deep: #05080f;
    --nexus-bg-dark: #0a0a14;
    --nexus-bg-light: #1a1a2e;
    
    /* Textos */
    --nexus-text-primary: #e0e8ff;
    --nexus-text-secondary: #a0a8c0;
    
    /* Espaciado */
    --spacing-unit: 8px;
    --spacing-sm: calc(var(--spacing-unit) * 0.5);
    --spacing-md: calc(var(--spacing-unit) * 1);
    --spacing-lg: calc(var(--spacing-unit) * 2);
    
    /* Bordes */
    --border-radius-sm: 4px;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;
    
    /* Sombras */
    --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
    --shadow-md: 0 4px 8px rgba(0,0,0,0.2);
    --shadow-lg: 0 8px 16px rgba(0,0,0,0.3);
    
    /* Transiciones */
    --transition-fast: 0.2s ease;
    --transition-normal: 0.3s ease;
    --transition-slow: 0.5s ease;
}

/* --- Estructura Base Mejorada --- */
.panel {
    position: relative;
    margin: var(--spacing-md) 0;
    padding: var(--spacing-md);
    background-color: var(--panel-bg, var(--bg-secondary));
    border: 1px solid var(--panel-border, var(--border-color));
    border-radius: var(--radius-lg);
    box-shadow: var(--panel-shadow, var(--shadow-sm));
    transition: all var(--transition-normal) var(--ease-in-out);
    overflow: hidden;
}

/* Estructura Interna */
.panel-header-container {
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--panel-border);
    background: var(--panel-header-bg);
}

.panel-content-wrapper {
    padding: var(--spacing-md);
    position: relative;
    z-index: 1;
}

.panel-content {
    color: inherit;
    line-height: var(--line-height-relaxed);
}

/* --- Estilos Sci-Fi / Tecnológicos --- */

/* 1. Data Stream (Mejorado para visibilidad interna) */
.panel.panel-style--data-stream {
    /* ... (Estilos anteriores de fondo, borde, padding, posición, overflow, box-shadow, animación data-fall) ... */
    background-color: #000000; /* Fondo oscuro */
    border: none;
    color: var(--neon-cyan, #00FFFF); /* <-- Color de texto principal del panel */
    font-family: var(--font-mono, monospace);
    padding: calc(var(--spacing-unit) * 1.5);
    position: relative; overflow: hidden;
    text-shadow: 0 0 3px var(--neon-cyan, #00FFFF);
}

.panel.panel-style--data-stream .panel-header {
    /* Estilo de cabecera para este tema */
     color: var(--neon-cyan, #00FFFF); /* <-- Asegurar color de cabecera */
     /* ... otros estilos ... */
}

.panel.panel-style--data-stream .panel-content-wrapper { /* Wrapper interno */
    padding: 0; /* Remueve padding wrapper si no se necesita */
}
.panel.panel-style--data-stream .panel-content { /* Contenido real */
    padding: 0; /* Remueve padding contenido si no se necesita */
    /* Asegurar que los elementos dentro hereden o tengan color correcto */
    color: var(--neon-cyan, #00FFFF); /* <-- Forzar color del contenido */
}

/* Asegurar que los elementos internos comunes hereden o tengan color */
.panel.panel-style--data-stream h1,
.panel.panel-style--data-stream h2,
.panel.panel-style--data-stream h3,
.panel.panel-style--data-stream p,
.panel.panel-style--data-stream ul,
.panel.panel-style--data-stream ol,
.panel.panel-style--data-stream li,
.panel.panel-style--data-stream table,
.panel.panel-style--data-stream th,
.panel.panel-style--data-stream td,
.panel.panel-style--data-stream code,
.panel.panel-style--data-stream pre,
.panel.panel-style--data-stream strong,
.panel.panel-style--data-stream em,
.panel.panel-style--data-stream blockquote {
    color: inherit; /* <-- Hacer que hereden el color del panel */
     /* O forzar un color si es necesario, ej: color: var(--neon-green, #00FF00); */
     /* Text-shadow para el glow */
     text-shadow: inherit; /* Heredar brillo del panel */
}

/* Estilos para Admonitions dentro de este panel */
.panel.panel-style--data-stream .markdown-alert-title { color: inherit; }
.panel.panel-style--data-stream .markdown-alert-note { border-left-color: currentColor; background-color: rgba(0,255,255,0.1); color: currentColor; } /* Usar currentColor */
/* ... y adaptar otros estados semánticos dentro de este panel ... */


/* 2. Blueprint (Mejorado para visibilidad interna) */
.panel.panel-style--blueprint {
    /* ... (Estilos anteriores de background, border, padding, font-family, background-image, box-shadow) ... */
    background-color: #e0f0ff;
    border: 1px solid #80b0ff;
    color: #102a4d; /* <-- Color de texto principal del panel */
    font-family: var(--font-mono, monospace);
    padding: calc(var(--spacing-unit) * 1.5);
    background-image:
        linear-gradient(rgba(0, 100, 200, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 100, 200, 0.1) 1px, transparent 1px),
        radial-gradient(circle at 50% 50%, rgba(0, 100, 200, 0.05) 0%, transparent 50%);
    background-size: 15px 15px, 15px 15px, 100% 100%;
    box-shadow:
        inset 0 0 20px rgba(0, 100, 200, 0.1),
        0 0 10px rgba(0, 100, 200, 0.2);
}
/* Asegurar visibilidad elementos internos */
.panel.panel-style--blueprint .panel-header { color: #0056b3; } /* Color específico cabecera */
.panel.panel-style--blueprint .panel-content { color: #102a4d; } /* <-- Forzar color contenido */
/* Heredar color o forzar para elementos internos */
.panel.panel-style--blueprint h1, .panel.panel-style--blueprint h2, /* etc. */
.panel.panel-style--blueprint p, .panel.panel-style--blueprint li, /* etc. */
.panel.panel-style--blueprint table, .panel.panel-style--blueprint th, /* etc. */
.panel.panel-style--blueprint code, .panel.panel-style--blueprint pre, /* etc. */
.panel.panel-style--blueprint strong, .panel.panel-style--blueprint em, /* etc. */
.panel.panel-style--blueprint blockquote {
    color: inherit; /* <-- Heredar el color del panel-content */
    text-shadow: none; /* Sin brillo si no se quiere */
}
/* ... adaptar otros estilos ... */


/* 3. Alien Tech (Mejorado para visibilidad interna) */
.panel.panel-style--alien-tech {
    /* ... (Estilos anteriores de background, border, padding, border-radius, box-shadow, posición, overflow, animación alien-energy-flow) ... */
    --alien-color1: #9a3ffc;
    --alien-color2: #32cd32;
    border: none;
    background:
        radial-gradient(ellipse at top left, var(--alien-color1), transparent 70%),
        radial-gradient(ellipse at bottom right, var(--alien-color2), transparent 70%),
        var(--nexus-bg-deep, #0a0a14);
    border-radius: 15px 0px 15px 0px;
    padding: calc(var(--spacing-unit) * 2);
    box-shadow:
        inset 0 0 15px rgba(154, 63, 252, 0.3),
        0 0 10px rgba(50, 205, 50, 0.3),
        0 0 20px rgba(154, 63, 252, 0.2);
    color: var(--nexus-text-primary, #e0e8ff); /* <-- Color de texto principal del panel */
    position: relative;
    overflow: hidden;
}
/* Asegurar visibilidad elementos internos */
.panel.panel-style--alien-tech .panel-header { color: var(--alien-color2); } /* Color específico cabecera */
.panel.panel-style--alien-tech .panel-content { color: var(--nexus-text-primary, #e0e8ff); } /* <-- Forzar color contenido */
/* Heredar color o forzar para elementos internos */
.panel.panel-style--alien-tech h1, .panel.panel-style--alien-tech h2, /* etc. */
.panel.panel-style--alien-tech p, .panel.panel-style--alien-tech li, /* etc. */
.panel.panel-style--alien-tech table, .panel.panel-style--alien-tech th, /* etc. */
/* ... adaptar otros estilos, asegurando que hereden o fuercen el color ... */


/* --- Estilos Cósmicos / Abstractos --- */

/* 12. Reality Glitch (Mejorado para visibilidad interna) */
.panel.panel-style--reality-glitch {
    /* ... (Estilos anteriores de background, border, color, font-family, padding, posición, overflow, animación glitch-pos, filter) ... */
    background-color: rgba(0, 0, 15, 0.8);
    border: 1px solid #ff00ff;
    color: #00ffff; /* <-- Color de texto principal del panel */
    font-family: var(--font-mono);
    padding: var(--spacing-unit);
    position: relative; overflow: hidden;
    animation: glitch-pos 0.1s infinite alternate;
    filter: url(#reality-glitch-filter);
    box-shadow:
        0 0 16px 4px rgba(0, 255, 255, 0.3),
        0 0 32px 8px rgba(255, 0, 255, 0.2),
        inset 0 0 20px rgba(0, 255, 255, 0.2);
    background-image:
        linear-gradient(45deg, rgba(0, 255, 255, 0.1) 25%, transparent 25%, transparent 75%, rgba(0, 255, 255, 0.1) 75%, rgba(0, 255, 255, 0.1)),
        linear-gradient(45deg, rgba(255, 0, 255, 0.1) 25%, transparent 25%, transparent 75%, rgba(255, 0, 255, 0.1) 75%, rgba(255, 0, 255, 0.1));
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
}
/* Asegurar visibilidad elementos internos */
.panel.panel-style--reality-glitch .panel-header { color: var(--neon-magenta, #ff00ff); text-shadow: var(--glow-magenta); } /* Color específico cabecera */
.panel.panel-style--reality-glitch .panel-content { color: #00ffff; } /* <-- Forzar color contenido */
/* Heredar color o forzar para elementos internos */
.panel.panel-style--reality-glitch h1, .panel.panel-style--reality-glitch h2, /* etc. */
.panel.panel-style--reality-glitch p, .panel.panel-style--reality-glitch li, /* etc. */
.panel.panel-style--reality-glitch table, .panel.panel-style--reality-glitch th, /* etc. */
.panel.panel-style--reality-glitch code, .panel.panel-style--reality-glitch pre, /* etc. */
.panel.panel-style--reality-glitch strong, .panel.panel-style--reality-glitch em, /* etc. */
.panel.panel-style--reality-glitch blockquote {
    color: inherit; /* <-- Heredar el color del panel-content */
    text-shadow: none; /* Sin brillo si no se quiere */
}
/* ... adaptar otros estilos ... */


/* --- RPG / TTRPG Specific Styles --- */

/* 17. Evidence Tag (Mejorado para visibilidad interna) */
.mixed-panel.evidence-tag { /* Usa mixed-panel.evidence-tag si esa es la clase base */
    /* ... (Estilos anteriores de background, border, color, font-family, padding, margin, width, max-width, border-radius, box-shadow, posición, overflow, background-image) ... */
    --tag-bg: #fdf5e6; --tag-border: #8b4513; --tag-text: #4a2c0b;
    background-color: var(--tag-bg); border: 1px solid var(--tag-border);
    color: var(--tag-text); /* <-- Color de texto principal del panel */
    font-family: 'Courier New', monospace; /* Forzar fuente */
    padding: var(--spacing-sm, 8px) var(--spacing-md, 16px); padding-left: calc(var(--spacing-md, 16px) * 2.5);
    margin: var(--spacing-md, 16px) auto; width: fit-content; max-width: 300px; border-radius: 3px 15px 15px 3px;
    box-shadow: 1px 1px 2px rgba(0,0,0,0.2); position: relative; overflow: visible;
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h100v100H0z' fill='%238b4513' fill-opacity='0.05'/%3E%3C/svg%3E");
    background-size: 100px 100px;
}
/* Asegurar visibilidad elementos internos */
.mixed-panel.evidence-tag .panel-header { color: var(--tag-text); font-family: 'Courier New', monospace; } /* Color específico cabecera */
.mixed-panel.evidence-tag .panel-content { color: var(--tag-text); font-family: 'Courier New', monospace; font-size: 0.9em; } /* <-- Forzar color contenido */
/* Heredar color o forzar para elementos internos */
.mixed-panel.evidence-tag p, .mixed-panel.evidence-tag li, /* etc. */
.mixed-panel.evidence-tag strong, .mixed-panel.evidence-tag em, /* etc. */
.mixed-panel.evidence-tag blockquote {
    color: inherit; /* <-- Heredar el color del panel-content */
    text-shadow: none; /* Sin brillo si no se quiere */
}
/* ... adaptar otros estilos ... */


/* 18. Statblock (Mejorado para visibilidad interna) */
.mixed-panel.statblock {
    /* ... (Estilos anteriores de border, background-color, color, padding, margin, font-family, background-image, box-shadow) ... */
    border: 2px solid var(--monster-border, #a52a2a);
    background-color: var(--monster-bg, #fdf5e6);
    color: var(--monster-text, #3b1e05); /* <-- Color de texto principal del panel */
    padding: 0; /* Padding va en wrappers internos */
    font-family: 'Georgia', serif;
    margin: var(--spacing-md, 16px) 0;
    background-image:
        url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h100v100H0z' fill='%23a52a2a' fill-opacity='0.05'/%3E%3C/svg%3E");
    background-size: 100px 100px;
    box-shadow:
        0 2px 4px rgba(0,0,0,0.1),
        inset 0 0 10px rgba(165, 42, 42, 0.1);
}
/* Asegurar visibilidad elementos internos */
.mixed-panel.statblock .panel-header {
    color: var(--monster-text, #3b1e05); /* Color específico cabecera */
    /* ... otros estilos ... */
}
.mixed-panel.statblock .panel-content { color: var(--monster-text, #3b1e05); } /* <-- Forzar color contenido */
/* Heredar color o forzar para elementos internos */
.mixed-panel.statblock h1, .mixed-panel.statblock h2, /* etc. */
.mixed-panel.statblock p, .mixed-panel.statblock li, /* etc. */
.mixed-panel.statblock table, .mixed-panel.statblock th, /* etc. */
.mixed-panel.statblock code, .mixed-panel.statblock pre, /* etc. */
.mixed-panel.statblock strong, .mixed-panel.statblock em, /* etc. */
.mixed-panel.statblock blockquote {
    color: inherit; /* <-- Heredar el color del panel-content */
    text-shadow: none; /* Sin brillo si no se quiere */
}
/* ... adaptar otros estilos ... */

/* --- Ajustes para la estructura interna (si se usan estos wrappers) --- */
.panel-header-container {
    /* Background, padding, border-bottom, margin-bottom */
     padding: calc(var(--spacing-unit) * 0.5) calc(var(--spacing-unit) * 1.5);
     margin-bottom: var(--spacing-unit);
     border-bottom: 1px solid rgba(255,255,255,0.1);
     background: rgba(255,255,255,0.05);
}
.panel-content-wrapper {
    /* Padding interno del contenido */
    padding: calc(var(--spacing-unit) * 1.5);
}
.panel-content {
    /* Espacio para tablas y listas internas */
    padding: 0; /* Remueve padding */
}

/* --- Estados Mejorados --- */
/* Regla base para el estado de error */
.state--error {
    --panel-border-error: #ff3030;
    --panel-bg-error: rgba(255, 48, 48, 0.1);
    --panel-text-error-base: #ff5050; /* Rojo un poco menos brillante */
    --panel-shadow-error: 0 0 6px rgba(255, 80, 80, 0.6); /* Sombra más suave */
    animation: error-pulse 2s infinite;
}

/* Combinación MUY específica para Scanline Terminal en estado de error */
.panel.panel-style--scanline-terminal.state--error {
    --panel-text-error-base: #ff5050; /* Rojo un poco menos brillante */
    --panel-border-error: #ff3030;
    --panel-bg-internal-error: rgba(255, 80, 80, 0.05);
    --panel-shadow-error: 0 0 6px rgba(255, 80, 80, 0.6);

    /* Aplicar estilos de error base al panel */
    color: var(--panel-text-error-base) !important; /* Forzar color base */
    border-color: var(--panel-border-error) !important;
    text-shadow: var(--panel-shadow-error) !important;
    background-color: var(--terminal-bg, #050a05) !important; 
}

/* SOBREESCRIBIR LA REGLA CONFLICTIVA: Forzar color y fondo en *TODOS* los elementos internos */
.panel.panel-style--scanline-terminal.state--error * {
    color: var(--panel-text-error-base) !important; /* Forzar color rojo */
    text-shadow: var(--panel-shadow-error) !important; /* Forzar sombra roja */
    background: transparent !important; /* Forzar fondo transparente por defecto */
    border-color: transparent !important; /* Forzar borde transparente por defecto */
}

/* Re-aplicar estilos específicos para el header (si existe) con !important */
.panel.panel-style--scanline-terminal.state--error .panel-header {
    color: var(--panel-text-error-base) !important;
    background-color: var(--panel-bg-error) !important;
    border-bottom-color: var(--panel-border-error) !important;
    text-shadow: inherit !important;
}

/* Re-aplicar estilos específicos para Admonition Warning con !important */
.panel.panel-style--scanline-terminal.state--error .markdown-alert.markdown-alert-warning {
    background-color: var(--panel-bg-internal-error) !important;
    border-left-color: var(--panel-border-error) !important;
    border-width: 0 0 0 4px !important;
    border-style: solid !important;
    padding: var(--spacing-md) !important;
    margin: var(--spacing-md) 0 !important;
    color: var(--panel-text-error-base) !important;
    text-shadow: inherit !important;
    border-radius: var(--border-radius-sm);
}
/* Título y contenido dentro del Admonition */
.panel.panel-style--scanline-terminal.state--error .markdown-alert.markdown-alert-warning *,
.panel.panel-style--scanline-terminal.state--error .markdown-alert.markdown-alert-warning .markdown-alert-title {
    color: var(--panel-text-error-base) !important;
    text-shadow: inherit !important;
    background: transparent !important;
}

/* Re-aplicar estilos específicos para pre/code con !important */
.panel.panel-style--scanline-terminal.state--error pre,
.panel.panel-style--scanline-terminal.state--error code {
    color: var(--panel-text-error-base) !important;
    background-color: var(--panel-bg-internal-error) !important;
    text-shadow: inherit !important;
    border: 1px solid rgba(255, 80, 80, 0.2) !important;
    padding: var(--spacing-sm) var(--spacing-md) !important;
    display: block;
    margin: var(--spacing-md) 0 !important;
    border-radius: var(--border-radius-sm);
}

.state--success {
    --panel-border: #90ff70;
    --panel-header-bg: rgba(144, 255, 112, 0.1);
    --panel-header-text: #90ff70;
    animation: success-pulse 2s infinite;
}

/* ... (resto de animaciones y estilos) ... */

/* --- END OF FILE src/styles/components/all-panel-styles.css --- */ 